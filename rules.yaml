lava_base_url: https://lkft.validation.linaro.org

rules:

- re_match:
    error_msg: 'lava-test-shell timed out after \d+ seconds'
    job_name: lkft-kselftest-linux
    device_type: ^x15$
    job_output:
      - Failed to allocate trace_probe
      - 'Kprobe dynamic event - probing module\\t\[FAIL\]'
  known_jobs:
    - 46497
  description: |
    LKFT: linux-next: x15: kselftest: ftracetest hangs forever
    - https://bugs.linaro.org/show_bug.cgi?id=3297
    - https://bugs.linaro.org/show_bug.cgi?id=3304

- re_match:
    error_msg: 'lava-test-shell timed out after \d+ seconds'
    job_name: lkft-ltp-syscalls-linux
    job_output:
      - 'LTP Version: 20170929'
      - 'INFO: task fanotify07:\d+ blocked for more than \d+ seconds.'
  known_jobs:
    - 46575
  description: |
    LTP: 20170929: hikey: fanotify07 sometimes causes kernel trace and LTP to hang
    - https://bugs.linaro.org/show_bug.cgi?id=3303

- re_match:
    error_msg: 'lava-test-shell timed out after \d+ seconds'
    job_name: lkft-ltp-sched-
    device_type: '^(juno-r2|x86)$'
    job_output:
      - 'nfs: server 10.\d+.\d+.\d+ not responding, still trying'
  known_jobs:
    - 46493
  description: |
    LKFT: linux-mainline: x86 : ltp sched tests hang due to NFS not responding
    note: also occurs on juno-r2
    https://bugs.linaro.org/show_bug.cgi?id=3338

- re_match:
    job_name: lkft-kselftest-linux-4.4.y
    error_msg: 'lava-test-shell timed out after \d+ seconds'
    device_type: ^x86$
    job_output:
      - 'selftests: ftracetest \[FAIL\]'
  known_jobs:
    - 46682
  description: |
    LKFT: 4.4 : x86: kselftest test case ftracetest failed
    https://bugs.linaro.org/show_bug.cgi?id=3336

- re_match:
    job_name: lkft-ltp-sched-
    device_type: ^hi6220-hikey$
    error_msg: 'lava-test-shell timed out after \d+ seconds'
    job_output:
      # multiline regex, detect reboot after tests start
      - 'Running tests........*NOTICE:  Booting Trusted Firmware'
  known_jobs:
    - 47665
  description: |
    LKFT: linux-mainline: HiKey: Overheating and auto reboot with
    "power_allocator" when running hackbench
    https://bugs.linaro.org/show_bug.cgi?id=3322

- re_match:
    job_name: lkft-ltp-timers-master
    device_type: ^juno-r2$
    error_msg: bootloader-commands timed out after \d+ seconds
    job_output:
      # Ensure we're getting linux-next
      - 'Validating that http:\/\/snapshots.linaro.org\/openembedded\/lkft\/morty\/juno\/rpb\/linux-next\/\d+\/juno-oe-uboot.zip exists'
  known_jobs:
    - 47628
  description: |
    LKFT: linux-next: Juno: Failed to start Linux kernel and boot failed
    https://bugs.linaro.org/show_bug.cgi?id=3325

- re_match:
    device_type: ^hi6220-hikey$
    error_msg: lava-test-shell timed out after \d+ seconds
    job_name: lkft-ltp-sched-4.4.93-rc1-hikey-20171016-33
    job_output:
      - 'Internal error: Oops: 96000006 \[#1\] PREEMPT SMP'
  known_jobs: ['47896']
  description: email thread 20171016

- re_match:
    device_type: ^hi6220-hikey$
    error_msg: '(lava-test-shell timed out after \d+ seconds|auto-login-action timed out after \d+ seconds)'
    job_name: lkft-
    job_output:
      - 'WARNING: CPU: \d+ PID: \d+ at [^ ]+ spi_register_controller\+'
  known_jobs: ['48014']
  description: |
    LKFT: linux-next: Hikey: Kernel warning: spi_register_controller
    https://bugs.linaro.org/show_bug.cgi?id=3346

- re_match:
    device_type: ^hi6220-hikey$
    error_msg: lava-test-shell timed out after \d+ seconds
    job_name: lkft-
    job_output:
      - 'Internal error: Oops: 96000004 \[#1\] PREEMPT SMP'
  known_jobs: ['48014']
  description: |
    LKFT: linux-next: Hikey: kernel warnings and Internal error: Oops:
    96000004 [#1] PREEMPT SMP
    https://bugs.linaro.org/show_bug.cgi?id=3345

- description: |
    Infrastructure failure: pdu reboot failed
  known_jobs: ['48001']
  re_match:
    device_type: ^x15$
    error_msg: '\/usr\/local\/lab-scripts\/eth\d+_control -a \d+.\d+.\d+.\d+ -r \d+ -s onoff failed'
    job_name: lkft-
